<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>UMDS User Guide: UMDS Client</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen_manual.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">UMDS User Guide
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('umdsclient.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">UMDS Client </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>UMDS includes the UMDS API, which is a library of Ultra Messaging functions for use by desktop applications. UMDS Clients communicate with the UMDS Server with TCP connections. You cannot use UDP to connect a UMDS Client to a UMDS Server.</p>
<p><br />
 </p>
<h1><a class="anchor" id="umdsapi"></a>
UMDS API&nbsp;&nbsp;<small><a href="#umdsapi">&lt;-</a></small></h1>
<p>The UMDS API is a more compact version of the Ultra Messaging API, intended to provide an easier and more consistent implementation of Ultra Messaging across enterprise desktops. The API is fully implemented for Java and .NET.</p>
<p><br />
 </p>
<h1><a class="anchor" id="serverconnection"></a>
Server Connection&nbsp;&nbsp;<small><a href="#serverconnection">&lt;-</a></small></h1>
<p>A UMDS Client application can create multiple server connections, which can be to the same UMDS Server or different UMDS Servers. The UMDS Client uses UMDS API <code>UMDSServerConnection</code> class calls to establish a server connection with the following general procedure:</p>
<ol>
<li>
<p class="startli">UMDS Client application creates a <code>UMDSServerConnection</code> object.</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">UMDS Client application sets configuration options.</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">UMDS Client initiates the TCP connection.</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">UMDS Server confirms the connection.</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">UMDS Client logs into the server, and sends client configuration parameters.</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">UMDS Server authenticates the UMDS Client application and sets configuration parameters.</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">UMDS Client application creates a source or receiver, and participates in messaging functions.</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">After it no longer needs the connection, UMDS Client application closes sources or receivers.</p>
<p class="endli"></p>
</li>
<li>
UMDS Client receives ACKs and closes the connection. </li>
</ol>
<p><br />
 </p>
<h2><a class="anchor" id="authenticatingapplicationsandusers"></a>
Authenticating Applications and Users&nbsp;&nbsp;<small><a href="#authenticatingapplicationsandusers">&lt;-</a></small></h2>
<p>You can authenticate either UMDS Client applications or individual desktop users when they connect to the server. By default, UMDS automatically authenticates all clients.</p>
<p>You can embed user passwords in a UMDS Client application or provide users with a login prompt. UMDS does not provide a login prompt facility. If you choose to authenticate applications or users, the application must deliver a user password to the UMDS Server with a <code>setProperty()</code> call. For an example, view the example application <code>umdssend.java</code> and search for <code>svrconn.setProperty("password", password)</code>.</p>
<p>If an application or desktop user requires authentication upon connection to the UMDS Server, set the application name, user name, and password in a Basic Authentication File. UMDS formats and transmits these parameters when requesting a connection.</p>
<p><br />
 </p>
<h2><a class="anchor" id="assigningdifferentclientsettingstoyourapplication"></a>
Assigning Different Client Settings to Your Application&nbsp;&nbsp;<small><a href="#assigningdifferentclientsettingstoyourapplication">&lt;-</a></small></h2>
<p>If your application requires different operating parameters from the UMDS Server, set the application name and parameters in a Basic Authentication File. UMDS formats and transmits these parameters when requesting a connection.</p>
<p><br />
 </p>
<h2><a class="anchor" id="applicationname"></a>
Application Name&nbsp;&nbsp;<small><a href="#applicationname">&lt;-</a></small></h2>
<p>UMDS Server administrators use the application name to identify the client applications connected to the server. Application developers should coordinate their application names with the server administrator to ensure proper connections and authentication.</p>
<p><br />
 </p>
<h1><a class="anchor" id="receiving"></a>
Receiving&nbsp;&nbsp;<small><a href="#receiving">&lt;-</a></small></h1>
<p>A UMDS Client application uses the <code>UMDSReceiver</code> class to start a receiver object and subscribe to a topic. This creates a UMS proxy receiver object at the UMDS server to listen for topic messages from other Ultra Messaging applications, including other UMDS client applications. As the UMDS Server receives messages for that topic, the UMDS Server routes the message to the proper UMDS Client applications.</p>
<p>In the following figure, a UMDS Client application subscribes to a topic. The UMDS Client application then receives a message on the topic from a remote Ultra Messaging sending application.</p>
<div class="image">
<img src="UMDS-rcv.png" alt="UMDS-rcv.png"/>
</div>
 <ol>
<li>
The UMDS Client application creates a regular receiver object at the UMDS Server. This action also specifies the topic of interest to the receiver. </li>
<li>
The UMDS Server acknowledges the receiver creation. </li>
<li>
The receiver begins receiving messages on the topic. </li>
</ol>
<p><br />
 </p>
<h1><a class="anchor" id="sending"></a>
Sending&nbsp;&nbsp;<small><a href="#sending">&lt;-</a></small></h1>
<p>A UMDS Client application uses <code>UMDSSource.send</code> to send messages on a topic to the UMDS server. The UMDS server then uses a proxy source to stream these messages. You configure these sources in the <a class="el" href="umdsserverconfiguration.html#umdsdconfigurationfile">umdsd Configuration File</a> with the <code>lbm-source</code> Option Type. See <a class="el" href="umdsserverconfiguration.html#umdstopicoptions">UMDS Topic Options</a>.</p>
<p>The following figure shows a UMDS Client application sending a message to all receivers listening on the topic.</p>
<div class="image">
<img src="UMDS_Send.png" alt="UMDS_Send.png"/>
</div>
 <p>A UMDS Client send performs the following steps.</p>
<ol>
<li>
UMDS Client application uses <code>UMDSSource.send</code> to send a message to the UMDS Server. </li>
<li>
UMDS Server multicasts the message to the Ultra Messaging Backbone. </li>
<li>
UMDS Server uses Ultra Messaging to send the message to other UMDS Client applications subscribed to the topic. </li>
</ol>
<p>Clients use nonblocking sends to send messages. If the send results in an EWOULDBLOCK, the UMDS Server temporarily disables the UMDS Client send socket, which applies back pressure to the client application. The UMDS Server automatically resends the message when the Ultra Messaging source transport unblocks.</p>
<p>You can also write UMDS Client applications that send Immediate Messages.</p>
<p><br />
 </p>
<h1><a class="anchor" id="requestandresponsecapability"></a>
Request and Response Capability&nbsp;&nbsp;<small><a href="#requestandresponsecapability">&lt;-</a></small></h1>
<p>UMDS clients can issue requests, and can send and receive responses, by using the UMDS client interface. UMDS clients can exchange requests and responses with other UMDS clients or with non-UMDS Ultra Messaging sources and receivers.</p>
<p>You cannot explicitly cancel a request issued by a UMDS client. UMDS client requests automatically time out after a server-configured period. The server-configured period applies to all clients.</p>
<p>The following figure shows UMDS requests and responses:</p>
<div class="image">
<img src="request_response_capability.png" alt="request_response_capability.png"/>
</div>
 <p>The following table describes the request and response operations shown in the preceding figure: </p><table class="doxtable">
<tr>
<td>Operation </td><td>Description </td><td><p class="starttd">C# and Java Method</p>
<p class="endtd"></p>
</td></tr>
<tr>
<td>Request </td><td>The sending application sends a request through a UMDS source object. The <code>request_id</code> parameter must be a 32-bit integer. </td><td><p class="starttd">request()</p>
<p class="endtd"></p>
</td></tr>
<tr>
<td>Send Request </td><td>The UMDS server forwards the request across the UM network. </td><td><p class="starttd"></p>
<p class="endtd"></p>
</td></tr>
<tr>
<td>Request Callback </td><td>The receiver object issues a callback to the receiving application. The receipt of the callback indicates the receipt of a request. </td><td><p class="starttd">onRequest()</p>
<p class="endtd"></p>
</td></tr>
<tr>
<td>Response(s) </td><td>The receiver sends zero or more responses. </td><td><p class="starttd">respond()</p>
<p class="endtd"></p>
</td></tr>
<tr>
<td>Send Response(s) </td><td>The UMDS server forwards the response across the UM network. </td><td><p class="starttd">n/a</p>
<p class="endtd"></p>
</td></tr>
<tr>
<td>Response Callback(s) </td><td>The source object that sent the request issues one or more callbacks to the sending application. The receipt of the callbacks indicates the receipt of a response. </td><td><p class="starttd">onResponse()</p>
<p class="endtd"></p>
</td></tr>
<tr>
<td>Request Timeout </td><td><p class="starttd">Each request has its own timeout period. When the configured timeout expires on the UMDS server, the UMDS server sends a request timeout notification to the sending client's <code>onEvent</code> callback. The timeout notification indicates that the request is closed, and that the source will deliver no more responses for that particular request. Requests always time out regardless of the number of responses received. A sending client must send new requests if it is dissatisfied with the number of responses.</p>
<p class="endtd">The server sends timeout notification messages to the sending client. Therefore, if the client disconnects from the server, the client cannot receive timeout notifications. When a client disconnects, the UMDS server cancels all outstanding requests without notification. If the client reconnects, the server does not send to the client any responses or timeout notifications for the requests that the client issued before it disconnected. </p>
</td><td>onEvent() </td></tr>
</table>
<p><br />
 </p>
<h1><a class="anchor" id="usingumdslatejoin"></a>
Using UMDS Late Join&nbsp;&nbsp;<small><a href="#usingumdslatejoin">&lt;-</a></small></h1>
<p>You can use Ultra Messaging Late Join functionality, however some aspects of Late Join work differently for UMDS Client receive applications.</p>
<p>With Late Join enabled, the first application that causes the UMDS Server to create a receiver for a particular topic initiates a Late Join request to the Ultra Messaging application's source for that topic. The UMDS Server also creates a message cache for the topic and stores the messages there to service subsequent late join requests more efficiently. When the UMDS Server receiver receives Late Join retransmissions, it sends them to the UMDS Client, flagged as RX messages.</p>
<p>When the receiver switches to live data, it streams the data to the client and continues to add to the message cache. When the message cache fills to maximum capacity, it deletes older messages as new messages arrive.</p>
<p>When a second UMDS Client receive application launches, it receives Late Join retransmissions from the UMDS Server message cache, not from the source's retention buffer. The second application might not receive the earlier messages that the first application received.</p>
<p>The following image shows how a first UMDS Client receive application receives its Late Join retransmissions from the source, while subsequent client applications receive Late Join retransmissions from the UMDS Server message cache.</p>
<div class="image">
<img src="UMDS_Late_Join.png" alt="UMDS_Late_Join.png"/>
</div>
 <p>There might be multiple sources on a topic, however the UMDS Server stores all messages on a topic into a single message cache. The message cache stores and dispatches data as whole messages, not message fragments.</p>
<p>To configure UMDS Client receiving applications to use Late Join, set the options in the umdsd configuration file. By default, Late Join is disabled for UMDS Client receive applications. The following example shows part of a umdsd configuration file that sets the options related to a UMDS Client receiving application that uses Late Join on topic <code>orderAW</code>.</p>
<pre>
&lt;topic pattern="orderAW" type="direct"&gt;
  &lt;umds-attributes&gt;
    &lt;option type="umds-receiver" name="use-late-join" value="1" /&gt;
    &lt;option type="umds-receiver" name="message-cache-size" value="10" /&gt;
    &lt;option type="lbm-receiver" name="use_late_join" value="1" /&gt;
    &lt;option type="lbm-receiver" name="late_join_info_request_interval"
          value="1000" /&gt;
    &lt;option type="lbm-receiver" name="late_join_info_request_maximum"
          value="60" /&gt;
    &lt;option type="lbm-receiver" name="retransmit_initial_sequence_number_request"
          value="1" /&gt;
    &lt;option type="lbm-receiver" name="retransmit_message_caching_proximity"
          value="2147483647" /&gt;
    &lt;option type="lbm-receiver" name="retransmit_request_interval"
          value="500" /&gt;
    &lt;option type="lbm-receiver" name="retransmit_request_maximum"
          value="0" /&gt;
    &lt;option type="lbm-receiver" name="retransmit_request_message_timeout"
          value="10000" /&gt;
  &lt;/umds-attributes&gt;
&lt;/topic&gt;
</pre><p><br />
 </p>
<h2><a class="anchor" id="latejoinumdssources"></a>
Late Join UMDS Sources&nbsp;&nbsp;<small><a href="#latejoinumdssources">&lt;-</a></small></h2>
<p>You can enable Late Join for UMDS sources in the same manner as for standard Ultra Messaging sources. This must be done on the UMDS server via its configuration file. The following example excerpt from a umdsd configuration file shows how to enable Late Join for topic <code>orderAW</code>. The example also shows other relevant source Late Join options.</p>
<pre>
&lt;topic pattern="orderAW" type="direct"&gt;
  &lt;umds-attributes&gt;
    &lt;option type="lbm-source" name="late_join" value="1" /&gt;
    &lt;option type="lbm-source" name="retransmit_retention_age_threshold"
          value="0" /&gt;
    &lt;option type="lbm-source" name="retransmit_retention_size_limit"
          value="25165824" /&gt;
    &lt;option type="lbm-source" name="retransmit_retention_size_threshold"
          value="100" /&gt;
  &lt;/umds-attributes&gt;
&lt;/topic&gt;
</pre><p>For more information about Late Join source configuration options, see the Ultra Messaging Configuration Guide. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.11-->
</body>
</html>
